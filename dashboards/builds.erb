<script type='text/javascript'>
  $(function() {
    Dashing.gridsterLayout('[{"col":1,"row":1,"size_x":4,"size_y":1},{"col":1,"row":2,"size_x":1,"size_y":1},{"col":3,"row":2,"size_x":1,"size_y":1},{"col":4,"row":2,"size_x":1,"size_y":1},{"col":2,"row":2,"size_x":1,"size_y":1}]')
  });
</script>
<div class="gridster">
  <ul>
    <% num_cols = (Builds::BUILDS_CONFIG.count > 4) ? 4 : 2 %>
    <% Builds::BUILDS_CONFIG.each_with_index do |(build_name,build_config), index| %>
      <% build_num = index + 1 %>
      <li data-row="<%= build_num % num_cols == 0 ? build_num / num_cols : build_num / num_cols + 1 %>"
          data-col="<%= build_num % num_cols == 0 ? num_cols : build_num % num_cols %>"
          data-sizex="<%= build_config[:size][:horizontal] %>" data-sizey="<%= build_config[:size][:vertical] %>">
        <div data-id="<%= build_name %>" data-server="<%= build_config[:server] %>"
             data-view="JenkinsDashboard"></div>
      </li>
    <% end %>
  </ul>
</div>
